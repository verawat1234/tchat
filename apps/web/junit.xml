<testsuites id="" name="" tests="2" failures="1" skipped="0" errors="0" time="4.342873">
<testsuite name="cors-gateway-validation.spec.ts" timestamp="2025-09-28T09:22:25.382Z" hostname="chromium" tests="2" failures="1" skipped="0" time="3.925" errors="0">
<testcase name="CORS and Gateway Validation â€º should validate CORS fix and gateway routing for OTP flow" classname="cors-gateway-validation.spec.ts" time="3.654">
<failure message="cors-gateway-validation.spec.ts:13:7 should validate CORS fix and gateway routing for OTP flow" type="FAILURE">
<![CDATA[  [chromium] â€º cors-gateway-validation.spec.ts:13:7 â€º CORS and Gateway Validation â€º should validate CORS fix and gateway routing for OTP flow 

    Error: expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 5
    Received array:  ["Access to fetch at 'http://localhost:8081/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.", "Access to fetch at 'http://localhost:8082/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.", "Access to fetch at 'http://localhost:8080/api/v1/notifications' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: Redirect is not allowed for a preflight request.", "Access to fetch at 'http://localhost:8081/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.", "Access to fetch at 'http://localhost:8082/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource."]

      92 |
      93 |     // Verify no CORS errors occurred
    > 94 |     expect(corsErrors).toHaveLength(0);
         |                        ^
      95 |     console.log('âœ… No CORS errors detected');
      96 |
      97 |     // Verify no critical API network errors
        at /Users/weerawat/Tchat/apps/web/tests/e2e/cors-gateway-validation.spec.ts:94:24

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ../../test-results/cors-gateway-validation-CO-3ca4b-ateway-routing-for-OTP-flow-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ../../test-results/cors-gateway-validation-CO-3ca4b-ateway-routing-for-OTP-flow-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: ../../test-results/cors-gateway-validation-CO-3ca4b-ateway-routing-for-OTP-flow-chromium/error-context.md
]]>
</failure>
<system-out>
<![CDATA[ðŸ§ª Testing CORS fix and gateway routing
ðŸ“± Navigated to auth screen
âœ… Auth screen elements visible
âœ… Phone number entered
ðŸ“ž OTP request initiated
âœ… OTP request succeeded through gateway
âœ… OTP request successfully routed through gateway
âœ… Field names are correctly formatted: { phone_number: [32m'+66812345678'[39m, country_code: [32m'TH'[39m }

[[ATTACHMENT|test-results/cors-gateway-validation-CO-3ca4b-ateway-routing-for-OTP-flow-chromium/test-failed-1.png]]

[[ATTACHMENT|test-results/cors-gateway-validation-CO-3ca4b-ateway-routing-for-OTP-flow-chromium/video.webm]]

[[ATTACHMENT|test-results/cors-gateway-validation-CO-3ca4b-ateway-routing-for-OTP-flow-chromium/error-context.md]]
]]>
</system-out>
</testcase>
<testcase name="CORS and Gateway Validation â€º should validate gateway health and auth service routing" classname="cors-gateway-validation.spec.ts" time="0.271">
<system-out>
<![CDATA[ðŸ§ª Testing gateway health and service routing
âœ… Gateway health check passed
âœ… Auth service accessible through gateway
âœ… OTP request with correct field names successful
ðŸŽ‰ Gateway health and service routing validation completed!
]]>
</system-out>
</testcase>
</testsuite>
</testsuites>