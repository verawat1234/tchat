<testsuites id="" name="" tests="7" failures="7" skipped="0" errors="0" time="25.65216">
<testsuite name="otp-auth-flow.spec.ts" timestamp="2025-10-03T07:56:15.082Z" hostname="chromium" tests="1" failures="1" skipped="0" time="11.937" errors="0">
<testcase name="OTP Authentication Flow › complete OTP authentication flow from phone input to verification" classname="otp-auth-flow.spec.ts" time="11.937">
<failure message="otp-auth-flow.spec.ts:4:7 complete OTP authentication flow from phone input to verification" type="FAILURE">
<![CDATA[  [chromium] › otp-auth-flow.spec.ts:4:7 › OTP Authentication Flow › complete OTP authentication flow from phone input to verification 

    Error: expect(locator).toBeVisible() failed

    Locator:  locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()
    Expected: visible
    Received: <element(s) not found>
    Timeout:  10000ms

    Call log:
      - Expect "toBeVisible" with timeout 10000ms
      - waiting for locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()


      38 |     const phoneInput = await page.locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first();
      39 |
    > 40 |     await expect(phoneInput).toBeVisible({ timeout: 10000 });
         |                              ^
      41 |     await page.screenshot({ path: 'tests/screenshots/02-phone-input-visible.png', fullPage: true });
      42 |
      43 |     // Step 3: Fill in the phone number
        at /Users/weerawat/Tchat/apps/web/tests/e2e/otp-auth-flow.spec.ts:40:30

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-chromium/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-chromium/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-chromium/error-context.md
]]>
</failure>
<system-out>
<![CDATA[Step 1: Navigating to http://localhost:3000
Browser console [debug]: [vite] connecting...
Browser console [debug]: [vite] connected.
Browser console [info]: %cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools font-weight:bold
Browser console [log]: [API Config] {gatewayBaseUrl: https://gateway-service-production-d78d.up.railway.app, apiUrl: https://gateway-service-production-d78d.up.railway.app/api/v1, wsUrl: wss://gateway-service-production-d78d.up.railway.app/ws, useDirectServices: false}
Browser console [info]: Content fallback service initialized successfully
Browser console [error]: Failed to load resource: the server responded with a status of 404 (Not Found)
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Access to fetch at 'http://localhost:8081/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.
Browser console [error]: Failed to load resource: net::ERR_FAILED
Step 2: Looking for phone number input field
Browser console [startGroup]: 🔧 Complete Service Integration Test
Browser console [startGroup]: 🚪 Gateway Integration Test
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]: ❌ Gateway Health: Unhealthy (2ms)
Browser console [warning]:    Gateway Error: Failed to fetch
Browser console [log]: 
🔍 API Endpoints Test:
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /products
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /chats
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /wallet
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /notifications
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /social/feed
Browser console [warning]:      Error: Failed to fetch
Browser console [log]: 
📊 Endpoint Summary: 0/5 endpoints available
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: ⚛️ RTK Query Integration Test
Browser console [log]: 🔧 Checking RTK Query configuration...
Browser console [log]: ✅ RTK Query API slice loaded
Browser console [log]: 📋 Available RTK Query endpoints: 110
Browser console [log]: ✅ Microservices API module loaded
Browser console [log]: ✅ RTK Query integration appears healthy
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: 📍 Endpoint Routing Configuration:
Browser console [log]:   /videos/shorts → video → http://localhost:8091/api/v1/videos/shorts
Browser console [log]:   /videos/long → video → http://localhost:8091/api/v1/videos/long
Browser console [log]:   /auth/login → auth → http://localhost:8081/api/v1/auth/login
Browser console [log]:   /users/profile → auth → http://localhost:8081/api/v1/users/profile
Browser console [log]:   /content/items → content → http://localhost:8086/api/v1/content/items
Browser console [log]:   /messages/list → messaging → http://localhost:8082/api/v1/messages/list
Browser console [log]:   /notifications/list → notification → http://localhost:8085/api/v1/notifications/list
Browser console [log]:   /payments/wallet → payment → http://localhost:8084/api/v1/payments/wallet
Browser console [log]:   /products/list → commerce → http://localhost:8083/api/v1/products/list
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: 🏥 Individual Service Health:
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Access to fetch at 'http://localhost:8081/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.
Browser console [error]: Failed to load resource: net::ERR_FAILED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ auth: Unavailable (1ms) - Failed to fetch
Browser console [log]:   ❌ commerce: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ content: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ messaging: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ notification: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ payment: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ video: Unavailable (2ms) - Failed to fetch
Browser console [log]: 
📊 Service Summary: 0/7 services available (0.0%)
Browser console [log]: ⏱️ Average Response Time: 2ms
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: 📋 Integration Test Summary:
Browser console [log]: ❌ Gateway: Connection issues detected
Browser console [log]: ⚠️ API Endpoints: Using fallback/mock data (normal for early development)
Browser console [log]: ✅ RTK Query: Integration configured
Browser console [log]: ℹ️ Ready for development with gateway integration
Browser console [endGroup]: console.groupEnd
Browser console [endGroup]: console.groupEnd

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-chromium/test-failed-1.png]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-chromium/video.webm]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-chromium/error-context.md]]
]]>
</system-out>
</testcase>
</testsuite>
<testsuite name="otp-auth-flow.spec.ts" timestamp="2025-10-03T07:56:15.082Z" hostname="firefox" tests="1" failures="1" skipped="0" time="12.269" errors="0">
<testcase name="OTP Authentication Flow › complete OTP authentication flow from phone input to verification" classname="otp-auth-flow.spec.ts" time="12.269">
<failure message="otp-auth-flow.spec.ts:4:7 complete OTP authentication flow from phone input to verification" type="FAILURE">
<![CDATA[  [firefox] › otp-auth-flow.spec.ts:4:7 › OTP Authentication Flow › complete OTP authentication flow from phone input to verification 

    Error: expect(locator).toBeVisible() failed

    Locator:  locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()
    Expected: visible
    Received: <element(s) not found>
    Timeout:  10000ms

    Call log:
      - Expect "toBeVisible" with timeout 10000ms
      - waiting for locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()


      38 |     const phoneInput = await page.locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first();
      39 |
    > 40 |     await expect(phoneInput).toBeVisible({ timeout: 10000 });
         |                              ^
      41 |     await page.screenshot({ path: 'tests/screenshots/02-phone-input-visible.png', fullPage: true });
      42 |
      43 |     // Step 3: Fill in the phone number
        at /Users/weerawat/Tchat/apps/web/tests/e2e/otp-auth-flow.spec.ts:40:30

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-firefox/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-firefox/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-firefox/error-context.md
]]>
</failure>
<system-out>
<![CDATA[Step 1: Navigating to http://localhost:3000
Browser console [debug]: [vite] connecting...
Browser console [debug]: [vite] connected.
Browser console [info]: Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
Browser console [log]: [API Config] JSHandle@object
Browser console [info]: Content fallback service initialized successfully
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8081/health. (Reason: CORS header ‘Access-Control-Allow-Origin’ missing). Status code: 404."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8083/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8086/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8082/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8085/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8081/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8084/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8083/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8086/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8082/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8085/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8091/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8084/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8091/health. (Reason: CORS request did not succeed). Status code: (null)."]
Step 2: Looking for phone number input field
Browser console [startGroup]: 🔧 Complete Service Integration Test
Browser console [startGroup]: 🚪 Gateway Integration Test
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [log]: ❌ Gateway Health: Unhealthy (4ms)
Browser console [warning]:    Gateway Error: NetworkError when attempting to fetch resource.
Browser console [log]: 
🔍 API Endpoints Test:
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/products. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [log]:   ❌ /products
Browser console [warning]:      Error: NetworkError when attempting to fetch resource.
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/products. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/chats. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [log]:   ❌ /chats
Browser console [warning]:      Error: NetworkError when attempting to fetch resource.
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/chats. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/wallet. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [log]:   ❌ /wallet
Browser console [warning]:      Error: NetworkError when attempting to fetch resource.
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/wallet. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/notifications. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [log]:   ❌ /notifications
Browser console [warning]:      Error: NetworkError when attempting to fetch resource.
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/notifications. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/social/feed. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [log]:   ❌ /social/feed
Browser console [warning]:      Error: NetworkError when attempting to fetch resource.
Browser console [log]: 
📊 Endpoint Summary: 0/5 endpoints available
Browser console [endGroup]: 
Browser console [startGroup]: ⚛️ RTK Query Integration Test
Browser console [log]: 🔧 Checking RTK Query configuration...
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/api/v1/social/feed. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [log]: ✅ RTK Query API slice loaded
Browser console [log]: 📋 Available RTK Query endpoints: 110
Browser console [log]: ✅ Microservices API module loaded
Browser console [log]: ✅ RTK Query integration appears healthy
Browser console [endGroup]: 
Browser console [startGroup]: 📍 Endpoint Routing Configuration:
Browser console [log]:   /videos/shorts → video → http://localhost:8091/api/v1/videos/shorts
Browser console [log]:   /videos/long → video → http://localhost:8091/api/v1/videos/long
Browser console [log]:   /auth/login → auth → http://localhost:8081/api/v1/auth/login
Browser console [log]:   /users/profile → auth → http://localhost:8081/api/v1/users/profile
Browser console [log]:   /content/items → content → http://localhost:8086/api/v1/content/items
Browser console [log]:   /messages/list → messaging → http://localhost:8082/api/v1/messages/list
Browser console [log]:   /notifications/list → notification → http://localhost:8085/api/v1/notifications/list
Browser console [log]:   /payments/wallet → payment → http://localhost:8084/api/v1/payments/wallet
Browser console [log]:   /products/list → commerce → http://localhost:8083/api/v1/products/list
Browser console [endGroup]: 
Browser console [startGroup]: 🏥 Individual Service Health:
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8081/health. (Reason: CORS header ‘Access-Control-Allow-Origin’ missing). Status code: 404."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8081/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8083/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8086/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8083/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8082/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8085/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8084/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8086/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [log]:   ❌ auth: Unavailable (3ms) - NetworkError when attempting to fetch resource.
Browser console [log]:   ❌ commerce: Unavailable (5ms) - NetworkError when attempting to fetch resource.
Browser console [log]:   ❌ content: Unavailable (5ms) - NetworkError when attempting to fetch resource.
Browser console [log]:   ❌ messaging: Unavailable (5ms) - NetworkError when attempting to fetch resource.
Browser console [log]:   ❌ notification: Unavailable (5ms) - NetworkError when attempting to fetch resource.
Browser console [log]:   ❌ payment: Unavailable (5ms) - NetworkError when attempting to fetch resource.
Browser console [log]:   ❌ video: Unavailable (5ms) - NetworkError when attempting to fetch resource.
Browser console [log]: 
📊 Service Summary: 0/7 services available (0.0%)
Browser console [log]: ⏱️ Average Response Time: 5ms
Browser console [endGroup]: 
Browser console [startGroup]: 📋 Integration Test Summary:
Browser console [log]: ❌ Gateway: Connection issues detected
Browser console [log]: ⚠️ API Endpoints: Using fallback/mock data (normal for early development)
Browser console [log]: ✅ RTK Query: Integration configured
Browser console [log]: ℹ️ Ready for development with gateway integration
Browser console [endGroup]: 
Browser console [endGroup]: 
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8091/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8082/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8085/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8084/health. (Reason: CORS request did not succeed). Status code: (null)."]
Browser console [error]: [JavaScript Error: "Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8091/health. (Reason: CORS request did not succeed). Status code: (null)."]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-firefox/test-failed-1.png]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-firefox/video.webm]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-firefox/error-context.md]]
]]>
</system-out>
</testcase>
</testsuite>
<testsuite name="otp-auth-flow.spec.ts" timestamp="2025-10-03T07:56:15.082Z" hostname="webkit" tests="1" failures="1" skipped="0" time="12.381" errors="0">
<testcase name="OTP Authentication Flow › complete OTP authentication flow from phone input to verification" classname="otp-auth-flow.spec.ts" time="12.381">
<failure message="otp-auth-flow.spec.ts:4:7 complete OTP authentication flow from phone input to verification" type="FAILURE">
<![CDATA[  [webkit] › otp-auth-flow.spec.ts:4:7 › OTP Authentication Flow › complete OTP authentication flow from phone input to verification 

    Error: expect(locator).toBeVisible() failed

    Locator:  locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()
    Expected: visible
    Received: <element(s) not found>
    Timeout:  10000ms

    Call log:
      - Expect "toBeVisible" with timeout 10000ms
      - waiting for locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()


      38 |     const phoneInput = await page.locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first();
      39 |
    > 40 |     await expect(phoneInput).toBeVisible({ timeout: 10000 });
         |                              ^
      41 |     await page.screenshot({ path: 'tests/screenshots/02-phone-input-visible.png', fullPage: true });
      42 |
      43 |     // Step 3: Fill in the phone number
        at /Users/weerawat/Tchat/apps/web/tests/e2e/otp-auth-flow.spec.ts:40:30

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-webkit/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-webkit/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-webkit/error-context.md
]]>
</failure>
<system-out>
<![CDATA[Step 1: Navigating to http://localhost:3000
Browser console [debug]: [vite] connecting...
Browser console [debug]: [vite] connected.
Browser console [log]: [API Config] {gatewayBaseUrl: https://gateway-service-production-d78d.up.railway.app, apiUrl: https://gateway-service-production-d78d.up.railway.app/api/v1, wsUrl: wss://gateway-service-production-d78d.up.railway.app/ws, useDirectServices: false}
Browser console [info]: Content fallback service initialized successfully
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Preflight response is not successful. Status code: 404
Browser console [error]: Failed to load resource: Preflight response is not successful. Status code: 404
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Step 2: Looking for phone number input field
Browser console [startGroup]: 🔧 Complete Service Integration Test
Browser console [startGroup]: 🚪 Gateway Integration Test
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]: ❌ Gateway Health: Unhealthy (1ms)
Browser console [warning]:    Gateway Error: Load failed
Browser console [log]: 
🔍 API Endpoints Test:
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /products
Browser console [warning]:      Error: Load failed
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /chats
Browser console [warning]:      Error: Load failed
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /wallet
Browser console [warning]:      Error: Load failed
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /notifications
Browser console [warning]:      Error: Load failed
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /social/feed
Browser console [warning]:      Error: Load failed
Browser console [log]: 
📊 Endpoint Summary: 0/5 endpoints available
Browser console [endGroup]: 
Browser console [startGroup]: ⚛️ RTK Query Integration Test
Browser console [log]: 🔧 Checking RTK Query configuration...
Browser console [log]: ✅ RTK Query API slice loaded
Browser console [log]: 📋 Available RTK Query endpoints: 110
Browser console [log]: ✅ Microservices API module loaded
Browser console [log]: ✅ RTK Query integration appears healthy
Browser console [endGroup]: 
Browser console [startGroup]: 📍 Endpoint Routing Configuration:
Browser console [log]:   /videos/shorts → video → http://localhost:8091/api/v1/videos/shorts
Browser console [log]:   /videos/long → video → http://localhost:8091/api/v1/videos/long
Browser console [log]:   /auth/login → auth → http://localhost:8081/api/v1/auth/login
Browser console [log]:   /users/profile → auth → http://localhost:8081/api/v1/users/profile
Browser console [log]:   /content/items → content → http://localhost:8086/api/v1/content/items
Browser console [log]:   /messages/list → messaging → http://localhost:8082/api/v1/messages/list
Browser console [log]:   /notifications/list → notification → http://localhost:8085/api/v1/notifications/list
Browser console [log]:   /payments/wallet → payment → http://localhost:8084/api/v1/payments/wallet
Browser console [log]:   /products/list → commerce → http://localhost:8083/api/v1/products/list
Browser console [endGroup]: 
Browser console [startGroup]: 🏥 Individual Service Health:
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Preflight response is not successful. Status code: 404
Browser console [error]: Failed to load resource: Preflight response is not successful. Status code: 404
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ auth: Unavailable (2ms) - Load failed
Browser console [log]:   ❌ commerce: Unavailable (3ms) - Load failed
Browser console [log]:   ❌ content: Unavailable (3ms) - Load failed
Browser console [log]:   ❌ messaging: Unavailable (3ms) - Load failed
Browser console [log]:   ❌ notification: Unavailable (3ms) - Load failed
Browser console [log]:   ❌ payment: Unavailable (3ms) - Load failed
Browser console [log]:   ❌ video: Unavailable (3ms) - Load failed
Browser console [log]: 
📊 Service Summary: 0/7 services available (0.0%)
Browser console [log]: ⏱️ Average Response Time: 3ms
Browser console [endGroup]: 
Browser console [startGroup]: 📋 Integration Test Summary:
Browser console [log]: ❌ Gateway: Connection issues detected
Browser console [log]: ⚠️ API Endpoints: Using fallback/mock data (normal for early development)
Browser console [log]: ✅ RTK Query: Integration configured
Browser console [log]: ℹ️ Ready for development with gateway integration
Browser console [endGroup]: 
Browser console [endGroup]: 

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-webkit/test-failed-1.png]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-webkit/video.webm]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-webkit/error-context.md]]
]]>
</system-out>
<system-err>
<![CDATA[Page error: Fetch API cannot load http: /localhost:8080/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8081/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8083/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8086/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8082/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8085/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8084/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8091/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/products due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/chats due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/wallet due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/notifications due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/social/feed due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8081/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8083/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8086/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8082/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8085/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8084/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8091/health due to access control checks.
]]>
</system-err>
</testcase>
</testsuite>
<testsuite name="otp-auth-flow.spec.ts" timestamp="2025-10-03T07:56:15.082Z" hostname="Mobile Chrome" tests="1" failures="1" skipped="0" time="11.702" errors="0">
<testcase name="OTP Authentication Flow › complete OTP authentication flow from phone input to verification" classname="otp-auth-flow.spec.ts" time="11.702">
<failure message="otp-auth-flow.spec.ts:4:7 complete OTP authentication flow from phone input to verification" type="FAILURE">
<![CDATA[  [Mobile Chrome] › otp-auth-flow.spec.ts:4:7 › OTP Authentication Flow › complete OTP authentication flow from phone input to verification 

    Error: expect(locator).toBeVisible() failed

    Locator:  locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()
    Expected: visible
    Received: <element(s) not found>
    Timeout:  10000ms

    Call log:
      - Expect "toBeVisible" with timeout 10000ms
      - waiting for locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()


      38 |     const phoneInput = await page.locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first();
      39 |
    > 40 |     await expect(phoneInput).toBeVisible({ timeout: 10000 });
         |                              ^
      41 |     await page.screenshot({ path: 'tests/screenshots/02-phone-input-visible.png', fullPage: true });
      42 |
      43 |     // Step 3: Fill in the phone number
        at /Users/weerawat/Tchat/apps/web/tests/e2e/otp-auth-flow.spec.ts:40:30

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Chrome/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Chrome/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Chrome/error-context.md
]]>
</failure>
<system-out>
<![CDATA[Step 1: Navigating to http://localhost:3000
Browser console [debug]: [vite] connecting...
Browser console [debug]: [vite] connected.
Browser console [info]: %cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools font-weight:bold
Browser console [log]: [API Config] {gatewayBaseUrl: https://gateway-service-production-d78d.up.railway.app, apiUrl: https://gateway-service-production-d78d.up.railway.app/api/v1, wsUrl: wss://gateway-service-production-d78d.up.railway.app/ws, useDirectServices: false}
Browser console [info]: Content fallback service initialized successfully
Browser console [error]: Failed to load resource: the server responded with a status of 404 (Not Found)
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Access to fetch at 'http://localhost:8081/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.
Browser console [error]: Failed to load resource: net::ERR_FAILED
Step 2: Looking for phone number input field
Browser console [startGroup]: 🔧 Complete Service Integration Test
Browser console [startGroup]: 🚪 Gateway Integration Test
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]: ❌ Gateway Health: Unhealthy (1ms)
Browser console [warning]:    Gateway Error: Failed to fetch
Browser console [log]: 
🔍 API Endpoints Test:
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /products
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /chats
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /wallet
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /notifications
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /social/feed
Browser console [warning]:      Error: Failed to fetch
Browser console [log]: 
📊 Endpoint Summary: 0/5 endpoints available
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: ⚛️ RTK Query Integration Test
Browser console [log]: 🔧 Checking RTK Query configuration...
Browser console [log]: ✅ RTK Query API slice loaded
Browser console [log]: 📋 Available RTK Query endpoints: 110
Browser console [log]: ✅ Microservices API module loaded
Browser console [log]: ✅ RTK Query integration appears healthy
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: 📍 Endpoint Routing Configuration:
Browser console [log]:   /videos/shorts → video → http://localhost:8091/api/v1/videos/shorts
Browser console [log]:   /videos/long → video → http://localhost:8091/api/v1/videos/long
Browser console [log]:   /auth/login → auth → http://localhost:8081/api/v1/auth/login
Browser console [log]:   /users/profile → auth → http://localhost:8081/api/v1/users/profile
Browser console [log]:   /content/items → content → http://localhost:8086/api/v1/content/items
Browser console [log]:   /messages/list → messaging → http://localhost:8082/api/v1/messages/list
Browser console [log]:   /notifications/list → notification → http://localhost:8085/api/v1/notifications/list
Browser console [log]:   /payments/wallet → payment → http://localhost:8084/api/v1/payments/wallet
Browser console [log]:   /products/list → commerce → http://localhost:8083/api/v1/products/list
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: 🏥 Individual Service Health:
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Access to fetch at 'http://localhost:8081/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.
Browser console [error]: Failed to load resource: net::ERR_FAILED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ auth: Unavailable (1ms) - Failed to fetch
Browser console [log]:   ❌ commerce: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ content: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ messaging: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ notification: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ payment: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ video: Unavailable (2ms) - Failed to fetch
Browser console [log]: 
📊 Service Summary: 0/7 services available (0.0%)
Browser console [log]: ⏱️ Average Response Time: 2ms
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: 📋 Integration Test Summary:
Browser console [log]: ❌ Gateway: Connection issues detected
Browser console [log]: ⚠️ API Endpoints: Using fallback/mock data (normal for early development)
Browser console [log]: ✅ RTK Query: Integration configured
Browser console [log]: ℹ️ Ready for development with gateway integration
Browser console [endGroup]: console.groupEnd
Browser console [endGroup]: console.groupEnd

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Chrome/test-failed-1.png]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Chrome/video.webm]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Chrome/error-context.md]]
]]>
</system-out>
</testcase>
</testsuite>
<testsuite name="otp-auth-flow.spec.ts" timestamp="2025-10-03T07:56:15.082Z" hostname="Mobile Safari" tests="1" failures="1" skipped="0" time="11.241" errors="0">
<testcase name="OTP Authentication Flow › complete OTP authentication flow from phone input to verification" classname="otp-auth-flow.spec.ts" time="11.241">
<failure message="otp-auth-flow.spec.ts:4:7 complete OTP authentication flow from phone input to verification" type="FAILURE">
<![CDATA[  [Mobile Safari] › otp-auth-flow.spec.ts:4:7 › OTP Authentication Flow › complete OTP authentication flow from phone input to verification 

    Error: expect(locator).toBeVisible() failed

    Locator:  locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()
    Expected: visible
    Received: <element(s) not found>
    Timeout:  10000ms

    Call log:
      - Expect "toBeVisible" with timeout 10000ms
      - waiting for locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()


      38 |     const phoneInput = await page.locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first();
      39 |
    > 40 |     await expect(phoneInput).toBeVisible({ timeout: 10000 });
         |                              ^
      41 |     await page.screenshot({ path: 'tests/screenshots/02-phone-input-visible.png', fullPage: true });
      42 |
      43 |     // Step 3: Fill in the phone number
        at /Users/weerawat/Tchat/apps/web/tests/e2e/otp-auth-flow.spec.ts:40:30

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Safari/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Safari/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Safari/error-context.md
]]>
</failure>
<system-out>
<![CDATA[Step 1: Navigating to http://localhost:3000
Browser console [debug]: [vite] connecting...
Browser console [debug]: [vite] connected.
Browser console [log]: [API Config] {gatewayBaseUrl: https://gateway-service-production-d78d.up.railway.app, apiUrl: https://gateway-service-production-d78d.up.railway.app/api/v1, wsUrl: wss://gateway-service-production-d78d.up.railway.app/ws, useDirectServices: false}
Browser console [info]: Content fallback service initialized successfully
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Preflight response is not successful. Status code: 404
Browser console [error]: Failed to load resource: Preflight response is not successful. Status code: 404
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Step 2: Looking for phone number input field
Browser console [startGroup]: 🔧 Complete Service Integration Test
Browser console [startGroup]: 🚪 Gateway Integration Test
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]: ❌ Gateway Health: Unhealthy (3ms)
Browser console [warning]:    Gateway Error: Load failed
Browser console [log]: 
🔍 API Endpoints Test:
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /products
Browser console [warning]:      Error: Load failed
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /chats
Browser console [warning]:      Error: Load failed
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /wallet
Browser console [warning]:      Error: Load failed
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /notifications
Browser console [warning]:      Error: Load failed
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ /social/feed
Browser console [warning]:      Error: Load failed
Browser console [log]: 
📊 Endpoint Summary: 0/5 endpoints available
Browser console [endGroup]: 
Browser console [startGroup]: ⚛️ RTK Query Integration Test
Browser console [log]: 🔧 Checking RTK Query configuration...
Browser console [log]: ✅ RTK Query API slice loaded
Browser console [log]: 📋 Available RTK Query endpoints: 110
Browser console [log]: ✅ Microservices API module loaded
Browser console [log]: ✅ RTK Query integration appears healthy
Browser console [endGroup]: 
Browser console [startGroup]: 📍 Endpoint Routing Configuration:
Browser console [log]:   /videos/shorts → video → http://localhost:8091/api/v1/videos/shorts
Browser console [log]:   /videos/long → video → http://localhost:8091/api/v1/videos/long
Browser console [log]:   /auth/login → auth → http://localhost:8081/api/v1/auth/login
Browser console [log]:   /users/profile → auth → http://localhost:8081/api/v1/users/profile
Browser console [log]:   /content/items → content → http://localhost:8086/api/v1/content/items
Browser console [log]:   /messages/list → messaging → http://localhost:8082/api/v1/messages/list
Browser console [log]:   /notifications/list → notification → http://localhost:8085/api/v1/notifications/list
Browser console [log]:   /payments/wallet → payment → http://localhost:8084/api/v1/payments/wallet
Browser console [log]:   /products/list → commerce → http://localhost:8083/api/v1/products/list
Browser console [endGroup]: 
Browser console [startGroup]: 🏥 Individual Service Health:
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Preflight response is not successful. Status code: 404
Browser console [error]: Failed to load resource: Preflight response is not successful. Status code: 404
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [error]: Could not connect to the server.
Browser console [error]: Failed to load resource: Could not connect to the server.
Browser console [log]:   ❌ auth: Unavailable (2ms) - Load failed
Browser console [log]:   ❌ commerce: Unavailable (4ms) - Load failed
Browser console [log]:   ❌ content: Unavailable (4ms) - Load failed
Browser console [log]:   ❌ messaging: Unavailable (4ms) - Load failed
Browser console [log]:   ❌ notification: Unavailable (5ms) - Load failed
Browser console [log]:   ❌ payment: Unavailable (5ms) - Load failed
Browser console [log]:   ❌ video: Unavailable (5ms) - Load failed
Browser console [log]: 
📊 Service Summary: 0/7 services available (0.0%)
Browser console [log]: ⏱️ Average Response Time: 4ms
Browser console [endGroup]: 
Browser console [startGroup]: 📋 Integration Test Summary:
Browser console [log]: ❌ Gateway: Connection issues detected
Browser console [log]: ⚠️ API Endpoints: Using fallback/mock data (normal for early development)
Browser console [log]: ✅ RTK Query: Integration configured
Browser console [log]: ℹ️ Ready for development with gateway integration
Browser console [endGroup]: 
Browser console [endGroup]: 

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Safari/test-failed-1.png]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Safari/video.webm]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Mobile-Safari/error-context.md]]
]]>
</system-out>
<system-err>
<![CDATA[Page error: Fetch API cannot load http: /localhost:8080/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8081/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8083/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8086/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8082/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8085/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8084/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8091/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/products due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/chats due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/wallet due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/notifications due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/api/v1/social/feed due to access control checks.
Page error: Fetch API cannot load http: /localhost:8080/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8081/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8083/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8086/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8082/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8085/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8084/health due to access control checks.
Page error: Fetch API cannot load http: /localhost:8091/health due to access control checks.
]]>
</system-err>
</testcase>
</testsuite>
<testsuite name="otp-auth-flow.spec.ts" timestamp="2025-10-03T07:56:15.082Z" hostname="Microsoft Edge" tests="1" failures="1" skipped="0" time="0.002" errors="0">
<testcase name="OTP Authentication Flow › complete OTP authentication flow from phone input to verification" classname="otp-auth-flow.spec.ts" time="0.002">
<failure message="otp-auth-flow.spec.ts:4:7 complete OTP authentication flow from phone input to verification" type="FAILURE">
<![CDATA[  [Microsoft Edge] › otp-auth-flow.spec.ts:4:7 › OTP Authentication Flow › complete OTP authentication flow from phone input to verification 

    Error: browserType.launch: Chromium distribution 'msedge' is not found at /Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge
    Run "npx playwright install msedge"
]]>
</failure>
</testcase>
</testsuite>
<testsuite name="otp-auth-flow.spec.ts" timestamp="2025-10-03T07:56:15.082Z" hostname="Google Chrome" tests="1" failures="1" skipped="0" time="11.367" errors="0">
<testcase name="OTP Authentication Flow › complete OTP authentication flow from phone input to verification" classname="otp-auth-flow.spec.ts" time="11.367">
<failure message="otp-auth-flow.spec.ts:4:7 complete OTP authentication flow from phone input to verification" type="FAILURE">
<![CDATA[  [Google Chrome] › otp-auth-flow.spec.ts:4:7 › OTP Authentication Flow › complete OTP authentication flow from phone input to verification 

    Error: expect(locator).toBeVisible() failed

    Locator:  locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()
    Expected: visible
    Received: <element(s) not found>
    Timeout:  10000ms

    Call log:
      - Expect "toBeVisible" with timeout 10000ms
      - waiting for locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first()


      38 |     const phoneInput = await page.locator('input[type="tel"], input[placeholder*="phone" i], input[name*="phone" i], input[data-testid="phone-input"]').first();
      39 |
    > 40 |     await expect(phoneInput).toBeVisible({ timeout: 10000 });
         |                              ^
      41 |     await page.screenshot({ path: 'tests/screenshots/02-phone-input-visible.png', fullPage: true });
      42 |
      43 |     // Step 3: Fill in the phone number
        at /Users/weerawat/Tchat/apps/web/tests/e2e/otp-auth-flow.spec.ts:40:30

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Google-Chrome/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Google-Chrome/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: ../../test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Google-Chrome/error-context.md
]]>
</failure>
<system-out>
<![CDATA[Step 1: Navigating to http://localhost:3000
Browser console [debug]: [vite] connecting...
Browser console [debug]: [vite] connected.
Browser console [info]: %cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools font-weight:bold
Browser console [log]: [API Config] {gatewayBaseUrl: https://gateway-service-production-d78d.up.railway.app, apiUrl: https://gateway-service-production-d78d.up.railway.app/api/v1, wsUrl: wss://gateway-service-production-d78d.up.railway.app/ws, useDirectServices: false}
Browser console [info]: Content fallback service initialized successfully
Browser console [error]: Failed to load resource: the server responded with a status of 404 (Not Found)
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Access to fetch at 'http://localhost:8081/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.
Browser console [error]: Failed to load resource: net::ERR_FAILED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Step 2: Looking for phone number input field
Browser console [startGroup]: 🔧 Complete Service Integration Test
Browser console [startGroup]: 🚪 Gateway Integration Test
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]: ❌ Gateway Health: Unhealthy (1ms)
Browser console [warning]:    Gateway Error: Failed to fetch
Browser console [log]: 
🔍 API Endpoints Test:
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /products
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /chats
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /wallet
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /notifications
Browser console [warning]:      Error: Failed to fetch
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ /social/feed
Browser console [warning]:      Error: Failed to fetch
Browser console [log]: 
📊 Endpoint Summary: 0/5 endpoints available
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: ⚛️ RTK Query Integration Test
Browser console [log]: 🔧 Checking RTK Query configuration...
Browser console [log]: ✅ RTK Query API slice loaded
Browser console [log]: 📋 Available RTK Query endpoints: 110
Browser console [log]: ✅ Microservices API module loaded
Browser console [log]: ✅ RTK Query integration appears healthy
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: 📍 Endpoint Routing Configuration:
Browser console [log]:   /videos/shorts → video → http://localhost:8091/api/v1/videos/shorts
Browser console [log]:   /videos/long → video → http://localhost:8091/api/v1/videos/long
Browser console [log]:   /auth/login → auth → http://localhost:8081/api/v1/auth/login
Browser console [log]:   /users/profile → auth → http://localhost:8081/api/v1/users/profile
Browser console [log]:   /content/items → content → http://localhost:8086/api/v1/content/items
Browser console [log]:   /messages/list → messaging → http://localhost:8082/api/v1/messages/list
Browser console [log]:   /notifications/list → notification → http://localhost:8085/api/v1/notifications/list
Browser console [log]:   /payments/wallet → payment → http://localhost:8084/api/v1/payments/wallet
Browser console [log]:   /products/list → commerce → http://localhost:8083/api/v1/products/list
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: 🏥 Individual Service Health:
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Access to fetch at 'http://localhost:8081/health' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.
Browser console [error]: Failed to load resource: net::ERR_FAILED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [error]: Failed to load resource: net::ERR_CONNECTION_REFUSED
Browser console [log]:   ❌ auth: Unavailable (1ms) - Failed to fetch
Browser console [log]:   ❌ commerce: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ content: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ messaging: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ notification: Unavailable (1ms) - Failed to fetch
Browser console [log]:   ❌ payment: Unavailable (2ms) - Failed to fetch
Browser console [log]:   ❌ video: Unavailable (2ms) - Failed to fetch
Browser console [log]: 
📊 Service Summary: 0/7 services available (0.0%)
Browser console [log]: ⏱️ Average Response Time: 2ms
Browser console [endGroup]: console.groupEnd
Browser console [startGroup]: 📋 Integration Test Summary:
Browser console [log]: ❌ Gateway: Connection issues detected
Browser console [log]: ⚠️ API Endpoints: Using fallback/mock data (normal for early development)
Browser console [log]: ✅ RTK Query: Integration configured
Browser console [log]: ℹ️ Ready for development with gateway integration
Browser console [endGroup]: console.groupEnd
Browser console [endGroup]: console.groupEnd

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Google-Chrome/test-failed-1.png]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Google-Chrome/video.webm]]

[[ATTACHMENT|test-results/otp-auth-flow-OTP-Authenti-2d8e3-phone-input-to-verification-Google-Chrome/error-context.md]]
]]>
</system-out>
</testcase>
</testsuite>
</testsuites>